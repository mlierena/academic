# Mesos 가 어떻게 High availability를 보장하는가?

## Mesos의 동작원리
* 


## Highly Available한 Framework 설계
* 메소스 프레임워크는 태스크를 관리한다. 프레임워크의 HA를 보장하기 위해서, 다양한 failure 가능성이 있는 시나리오에도 계속해서 정확하게 태스크 관리할 수 있도록 해야한다. 다음과 같이, 가장 빈번하게 failure가 되는 조건들이 있으며, 이는 프레임워크 작성자가 알고 있어야 한다.
    * 예를 들어서 충돌이 일어나거나 네트워크 접속이 끊어질 경우, 프레임워크 스케쥴러가 연결된 메소스 마스터가 fail될 수도 있다. 마스터가 high availability 모드로 돌아가는 경우, 메소스 마스터 복제본이 리더가 되도록 promote하게 된다. 이 경우에는, 스케쥴러가 새로운 마스터를 등록하고, 태스크의 상태가 일관적이도록 보장되어야 한다.
    * 프레임워크 스케쥴러가 돌고있는 호스트가 fail 될 수도 있다. 프레임워크가 계속 이용될 수 있도록 하고, 계속해서 새로운 태스크를 수행할 수 있도록 하기 위해서, 여러개의 스케쥴러 복사본이 각각 다른 노드에서 돌아갈 수 있도록 보장해야하며, 이전의 리더가 fail 될 때 backup 복사본이 새로운 리더가 될 수 있도록 해야한다. 아래에서 서술할 상황을 제안하더라도, 메소스 그 자체로는 '프레임워크 작성자가 이러한 상황을 어떻게 제어할지' 결정하지 않는다. Apache Aurora나 Marathon 같은 long-running 스케쥴러를 이용해서 프레임워크 스케쥴러의 여러 복사본을 deploy하는 것도 좋다.
    * 태스크가 돌고 있는 호스트가 fail 될 수도 있다.



# 참고자료
* (공식 문서)[http://mesos.apache.org/documentation/latest/high-availability-framework-guide/]